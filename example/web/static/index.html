<!doctype html>
<html>
  <head>
    <script src="./bower_components/webcomponentsjs/webcomponents.min.js"></script>
    <title>irMagician web application sample</title>
    <link rel="import" href="./bower_components/font-roboto/roboto.html">
    <link rel="import" href="./bower_components/polymer/polymer.html">
    <link rel="import" href="./bower_components/core-scaffold/core-scaffold.html">
    <link rel="import" href="./bower_components/core-header-panel/core-header-panel.html">
    <link rel="import" href="./bower_components/core-toolbar/core-toolbar.html">
    <link rel="import" href="./bower_components/core-menu/core-menu.html">
    <link rel="import" href="./bower_components/core-item/core-item.html">
    <link rel="import" href="./bower_components/paper-button/paper-button.html">
    <link rel="import" href="./bower_components/core-ajax/core-ajax.html">
  </head>
  <body unresolved>
    <core-scaffold>
      <core-header-panel navigation flex mode="seamed">
        <core-toolbar>irMagician</core-toolbar>
        <core-menu>
          <core-item icon="settings">Air Conditioner</core-item>
        </core-menu>
      </core-header-panel>
      <div tool>Air Conditoner</div>
      <div class="content">
        <template>
          <paper-button raised on-click={{airconOn}}>On</paper-button>
          <paper-button raised on-click={{airconOff}}>Off</paper-button>
          <core-ajax url="//api/push/v1"
                     id="ajax"
                     params='{"power": {{airconStatus}}}'
                     handleAs="json"
                     on-core-response="{{handleResponse}}"></core-ajax>
        </template>
      </div>

    </core-scaffold>
    <script>
     document.addEventListener('polymer-ready', function() {
       var ajax = document.getElementById('ajax');
       document.querySelector('template').model = {
         airconStatus: false,
         airconOn: function() {
           this.$.airconStatus = true;
           ajax.go();
         },
         airconOff: function() {
           this.$.airconStatus = false;
           ajax.go();
         },
         handleResponse: function(e) {
           console.log(e);
         }
       };
     });
    </script>
  </body>
</html>
